{
    "$schema": "http://schema.express.azure.com/schemas/2015-01-01-alpha/RolloutParameters.json",
    "contentVersion": "1.0.0.0",
    "shellExtensions": [
        {
            "name": "aksacrpush",
            "type": "aksacrpush",
            "properties": {
                "maxexecutiontime": "PT20M"
            },
            "package": {
                "reference": {
                    "path": "bin\\acrpush.tar"
                }
            },
            "launch": {
                "command": [
                    "push-image.sh"
                ],
                "environmentVariables": [
                    {
                        "name": "acr_name",
                        "value": "__ACR_NAME__"
                    },
                    {
                        "name": "acr_subscription_id",
                        "value": "__ACR_SUBSCRIPTION_ID__"
                    },
                    {
                        "name": "image_name",
                        "value": "__IMAGE_NAME__"
                    },
                    {
                        "name": "docker_tag",
                        "value": "__BUILD_ID__"
                    },
                    {
                        "name": "gcr_endpoint",
                        "value": "__GCR_ENDPOINT__"
                    }
                ],
                "identity":{
                    "type": "UserAssigned",
                    "userAssignedIdentities":
                    [
                        "__ACR_MSI_RESOURCE_ID__"
                    ]
                }
            }
        }
    ]
}
